{"version":3,"sources":["SearchPage/RecentlyAdded.js"],"names":["mealValueTmp","RecentlyAdded","props","useState","length","window","location","hash","split","meal","setMeal","useLayoutEffect","doAnimation","introPageTransition","introPageFadeTransition","addEventListener","pathname","includes","a","page","document","getElementById","style","opacity","transition","wait","removeAttribute","getRecentMeal","mealName","dateIndex","getDataByDate","userData","diary","filter","e","date","dateGetter","map","Object","assign","data","el","id","value","input","key","Math","random","name","kcal","round","serving","brand","description","renderRecent","content","i","push","className","onClick","toAddMeal","itemsArray","addByDate","favorite","tmpMeal","mealContent","snackbarHandle","checkHash","storeData","addAllButtonHandle","h","xmlns","viewBox","history","back","d","onChange","target","display"],"mappings":"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","file":"static/js/6.c020b6b0.chunk.js","sourcesContent":["import React, { Fragment, useState, useLayoutEffect } from \"react\";\r\nimport \"../Styles/RecentlyAdded.css\";\r\nimport { userData, data, storeData } from \"../Data\";\r\nimport { dateGetter, dateIndex } from \"../NavicationBar/MainPage\";\r\nimport { wait, Snackbar, snackbarHandle, introPageTransition } from \"../dependencies\";\r\nimport ItemCard from \"../Foods/ItemCard\";\r\n\r\nlet mealValueTmp = \"\";\r\nexport default function RecentlyAdded(props) {\r\n  const [meal, setMeal] = useState(\r\n    mealValueTmp.length > 0 ? mealValueTmp : window.location.hash.split(\"#\")[1] ? window.location.hash.split(\"#\")[1] : \"breakfast\"\r\n  );\r\n\r\n  useLayoutEffect(() => {\r\n    if (props.doAnimation) {\r\n      introPageTransition(\"recentPage\");\r\n    } else {\r\n      introPageFadeTransition();\r\n    }\r\n    window.addEventListener(\"popstate\", () => {\r\n      if (window.location.pathname === \"/\" || window.location.pathname.includes(\"search\")) mealValueTmp = \"\";\r\n    });\r\n  }, [props.doAnimation]);\r\n\r\n  const introPageFadeTransition = async () => {\r\n    const page = document.getElementById(\"recentPage\");\r\n    page.style.opacity = \"0\";\r\n    page.style.transition = \"opacity 350ms\";\r\n    await wait(20);\r\n    page.style.opacity = \"1\";\r\n    await wait(350);\r\n    page.removeAttribute(\"style\");\r\n  };\r\n\r\n  const getRecentMeal = (mealName, dateIndex) => {\r\n    const getDataByDate = userData.diary.filter((e) => e.date === dateGetter(dateIndex))[0];\r\n    if (getDataByDate && getDataByDate[mealName]) {\r\n      const getDataById = getDataByDate[mealName].map(\r\n        (e) => (e = Object.assign({}, data.filter((el) => el.id === e[0])[0], { value: e[1], input: e[2] }))\r\n      );\r\n      return getDataById.map((e) => (\r\n        <ItemCard\r\n          key={e.id + Math.random() * 1000}\r\n          name={e.name}\r\n          kcal={Math.round((e.kcal / 100) * (e.value * e.input))}\r\n          serving={e.value === 1 ? e.input + \" غرام \" : e.input + \"  \" + e.serving.filter((el) => el[1] === e.value)[0][0]}\r\n          id={e.id}\r\n          brand={e.brand}\r\n          description={e.description}\r\n          value={e.value}\r\n          input={e.input}\r\n        />\r\n      ));\r\n    }\r\n  };\r\n\r\n  const addAllButtonHandle = (toAddMeal, mealName, i) => {\r\n    const getDataByDate = userData.diary.filter((e) => e.date === dateGetter(i))[0];\r\n    let itemsArray;\r\n    if (getDataByDate && getDataByDate[mealName]) {\r\n      itemsArray = [...getDataByDate[mealName]];\r\n    }\r\n\r\n    const addByDate = userData.diary.filter((e) => e.date === dateGetter(dateIndex))[0];\r\n    if (window.location.pathname.includes(\"CreateNewMeal\") || window.location.pathname.includes(\"EditMeal\")) {\r\n      userData.favorite.tmpMeal.mealContent.push(...itemsArray);\r\n      snackbarHandle(\"تمت الإضافة على الوجبة\", \"success\");\r\n    } else if (addByDate) {\r\n      addByDate[toAddMeal] ? addByDate[toAddMeal].push(...itemsArray) : (addByDate[toAddMeal] = itemsArray);\r\n      snackbarHandle(\"تمت الإضافة على \" + checkHash(toAddMeal), \"success\");\r\n    } else {\r\n      snackbarHandle(\"تمت الإضافة على \" + checkHash(toAddMeal), \"success\");\r\n      userData.diary.push({ date: dateGetter(dateIndex), [toAddMeal]: itemsArray });\r\n    }\r\n    storeData();\r\n  };\r\n\r\n  const renderRecent = () => {\r\n    let content = [];\r\n    for (let i = 0; i > -8; i--) {\r\n      if (getRecentMeal(meal, i)) {\r\n        content.push([\r\n          <Fragment key={Math.random() * 1000}>\r\n            <p id=\"recentDateText\">{dateGetter(i)}</p>\r\n            <p className=\"recentAddAll\" onClick={() => addAllButtonHandle(window.location.hash.split(\"#\")[1], meal, i)}>\r\n              إضافة الكل ↓\r\n            </p>\r\n            <div>{getRecentMeal(meal, i)}</div>\r\n          </Fragment>,\r\n        ]);\r\n      }\r\n    }\r\n    return content;\r\n  };\r\n\r\n  const selectMealHandle = (e) => {\r\n    setMeal(e.target.value);\r\n    mealValueTmp = e.target.value;\r\n  };\r\n\r\n  const backButtonHandle = () => window.history.back();\r\n\r\n  const checkHash = (h) => {\r\n    let hash;\r\n    switch (h) {\r\n      case \"breakfast\":\r\n        hash = \"الفطور\";\r\n        break;\r\n      case \"lunch\":\r\n        hash = \"الغداء\";\r\n        break;\r\n      case \"dinner\":\r\n        hash = \"العشاء\";\r\n        break;\r\n      case \"snacks\":\r\n        hash = \"وجبة خفيفة\";\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return hash;\r\n  };\r\n\r\n  return (\r\n    <div id=\"recentPage\">\r\n      <Snackbar />\r\n      <header id=\"recentPageHeader\">\r\n        <p id=\"recentHeaderTitle\">المضافة مؤخراً</p>\r\n        <svg id=\"recentBack\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" onClick={backButtonHandle}>\r\n          <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\r\n        </svg>\r\n      </header>\r\n      <select id=\"recentSelectMeal\" value={meal} onChange={selectMealHandle}>\r\n        <option className=\"itemViewerSelectMealItems\" value=\"breakfast\">\r\n          الفطور\r\n        </option>\r\n        <option className=\"itemViewerSelectMealItems\" value=\"lunch\">\r\n          الغداء\r\n        </option>\r\n        <option className=\"itemViewerSelectMealItems\" value=\"dinner\">\r\n          العشاء\r\n        </option>\r\n        <option className=\"itemViewerSelectMealItems\" value=\"snacks\">\r\n          وجبة خفيفة\r\n        </option>\r\n      </select>\r\n      <p id=\"recentNoResults\" style={{ display: renderRecent().length > 0 ? \"none\" : \"block\" }}>\r\n        لا يوجد عناصر مضافة في آخر اسبوع على {checkHash(meal)}\r\n      </p>\r\n      <div>{renderRecent()}</div>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}