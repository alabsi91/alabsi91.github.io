{"version":3,"sources":["SearchPage/RecentlyAdded.js"],"names":["mealValueTmp","RecentlyAdded","state","meal","length","window","location","hash","split","getRecentMeal","mealName","dateIndex","getDataByDate","userData","diary","filter","e","date","dateGetter","map","Object","assign","data","el","id","value","input","key","Math","random","name","kcal","round","serving","brand","description","addAllButtonHandle","toAddMeal","i","itemsArray","addByDate","pathname","includes","favorite","tmpMeal","mealContent","push","snackbarHandle","checkHash","storeData","renderRecent","content","className","onClick","selectMealHandle","setState","target","backButtonHandle","history","back","h","this","props","doAnimation","introPageTransition","introPageFadeTransition","addEventListener","xmlns","viewBox","d","onChange","style","display","Component"],"mappings":"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","file":"static/js/6.bcbe222a.chunk.js","sourcesContent":["import React, { Fragment, Component } from 'react';\r\nimport '../Styles/RecentlyAdded.css';\r\nimport { userData, data, storeData } from '../Data';\r\nimport { dateGetter, dateIndex } from '../NavicationBar/MainPage';\r\nimport { Snackbar, snackbarHandle, introPageTransition, introPageFadeTransition } from '../dependencies';\r\nimport ItemCard from '../Foods/ItemCard';\r\n\r\nlet mealValueTmp = '';\r\nexport default class RecentlyAdded extends Component {\r\n  state = {\r\n    meal:\r\n      mealValueTmp.length > 0\r\n        ? mealValueTmp\r\n        : window.location.hash.split('#')[1]\r\n        ? window.location.hash.split('#')[1]\r\n        : 'breakfast',\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.doAnimation) {\r\n      introPageTransition('recentPage');\r\n    } else {\r\n      introPageFadeTransition('recentPage');\r\n    }\r\n    window.addEventListener('popstate', () => {\r\n      if (window.location.pathname === '/' || window.location.pathname.includes('search')) mealValueTmp = '';\r\n    });\r\n  }\r\n\r\n  getRecentMeal = (mealName, dateIndex) => {\r\n    const getDataByDate = userData.diary.filter(e => e.date === dateGetter(dateIndex))[0];\r\n    if (getDataByDate && getDataByDate[mealName]) {\r\n      const getDataById = getDataByDate[mealName].map(\r\n        e => (e = Object.assign({}, data.filter(el => el.id === e[0])[0], { value: e[1], input: e[2] }))\r\n      );\r\n      return getDataById.map(e => (\r\n        <ItemCard\r\n          key={e.id + Math.random() * 1000}\r\n          name={e.name}\r\n          kcal={Math.round((e.kcal / 100) * (e.value * e.input))}\r\n          serving={e.value === 1 ? e.input + ' غرام ' : e.input + '  ' + e.serving.filter(el => el[1] === e.value)[0][0]}\r\n          id={e.id}\r\n          brand={e.brand}\r\n          description={e.description}\r\n          value={e.value}\r\n          input={e.input}\r\n        />\r\n      ));\r\n    }\r\n  };\r\n\r\n  addAllButtonHandle = (toAddMeal, mealName, i) => {\r\n    const getDataByDate = userData.diary.filter(e => e.date === dateGetter(i))[0];\r\n    let itemsArray;\r\n    if (getDataByDate && getDataByDate[mealName]) {\r\n      itemsArray = [...getDataByDate[mealName]];\r\n    }\r\n\r\n    const addByDate = userData.diary.filter(e => e.date === dateGetter(dateIndex))[0];\r\n    if (window.location.pathname.includes('CreateNewMeal') || window.location.pathname.includes('EditMeal')) {\r\n      userData.favorite.tmpMeal.mealContent.push(...itemsArray);\r\n      snackbarHandle('تمت الإضافة على الوجبة', 'success');\r\n    } else if (addByDate) {\r\n      addByDate[toAddMeal] ? addByDate[toAddMeal].push(...itemsArray) : (addByDate[toAddMeal] = itemsArray);\r\n      snackbarHandle('تمت الإضافة على ' + this.checkHash(toAddMeal), 'success');\r\n    } else {\r\n      snackbarHandle('تمت الإضافة على ' + this.checkHash(toAddMeal), 'success');\r\n      userData.diary.push({ date: dateGetter(dateIndex), [toAddMeal]: itemsArray });\r\n    }\r\n    storeData();\r\n  };\r\n\r\n  renderRecent = () => {\r\n    let content = [];\r\n    for (let i = 0; i > -16; i--) {\r\n      if (this.getRecentMeal(this.state.meal, i)) {\r\n        content.push([\r\n          <Fragment key={Math.random() * 1000}>\r\n            <p id='recentDateText'>{dateGetter(i)}</p>\r\n            <p\r\n              className='recentAddAll'\r\n              onClick={() => this.addAllButtonHandle(window.location.hash.split('#')[1], this.state.meal, i)}\r\n            >\r\n              إضافة الكل ↓\r\n            </p>\r\n            <div>{this.getRecentMeal(this.state.meal, i)}</div>\r\n          </Fragment>,\r\n        ]);\r\n      }\r\n    }\r\n    return content;\r\n  };\r\n\r\n  selectMealHandle = e => {\r\n    this.setState({ meal: e.target.value });\r\n    mealValueTmp = e.target.value;\r\n  };\r\n\r\n  backButtonHandle = () => window.history.back();\r\n\r\n  checkHash = h => {\r\n    let hash;\r\n    switch (h) {\r\n      case 'breakfast':\r\n        hash = 'الفطور';\r\n        break;\r\n      case 'lunch':\r\n        hash = 'الغداء';\r\n        break;\r\n      case 'dinner':\r\n        hash = 'العشاء';\r\n        break;\r\n      case 'snacks':\r\n        hash = 'وجبة خفيفة';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return hash;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id='recentPage'>\r\n        <Snackbar />\r\n        <header id='recentPageHeader'>\r\n          <p id='recentHeaderTitle'>المضافة مؤخراً</p>\r\n          <svg id='recentBack' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' onClick={this.backButtonHandle}>\r\n            <path d='M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z' />\r\n          </svg>\r\n        </header>\r\n        <select id='recentSelectMeal' value={this.state.meal} onChange={this.selectMealHandle}>\r\n          <option className='itemViewerSelectMealItems' value='breakfast'>\r\n            الفطور\r\n          </option>\r\n          <option className='itemViewerSelectMealItems' value='lunch'>\r\n            الغداء\r\n          </option>\r\n          <option className='itemViewerSelectMealItems' value='dinner'>\r\n            العشاء\r\n          </option>\r\n          <option className='itemViewerSelectMealItems' value='snacks'>\r\n            وجبة خفيفة\r\n          </option>\r\n        </select>\r\n        <p id='recentNoResults' style={{ display: this.renderRecent().length > 0 ? 'none' : 'block' }}>\r\n          لا يوجد عناصر مضافة في آخر اسبوع على {this.checkHash(this.state.meal)}\r\n        </p>\r\n        <div>{this.renderRecent()}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}