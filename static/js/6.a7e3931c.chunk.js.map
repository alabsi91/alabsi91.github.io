{"version":3,"sources":["SearchPage/RecentlyAdded.js"],"names":["mealValueTmp","RecentlyAdded","state","meal","length","window","location","hash","split","introPageFadeTransition","a","page","document","getElementById","style","opacity","transition","wait","removeAttribute","introPageTransition","pageHeader","cssText","position","bottom","getRecentMeal","mealName","dateIndex","getDataByDate","userData","diary","filter","e","date","dateGetter","map","Object","assign","data","el","id","value","input","key","Math","random","name","kcal","round","serving","brand","description","addAllButtonHandle","toAddMeal","i","itemsArray","addByDate","pathname","includes","favorite","tmpMeal","mealContent","push","snackbarHandle","checkHash","storeData","renderRecent","content","className","onClick","selectMealHandle","setState","target","backButtonHandle","history","back","h","this","props","doAnimation","addEventListener","xmlns","viewBox","d","onChange","display","Component"],"mappings":"6SAOIA,EAAe,GACEC,E,4MACnBC,MAAQ,CACNC,KACEH,EAAaI,OAAS,EAClBJ,EACAK,OAAOC,SAASC,KAAKC,MAAM,KAAK,GAChCH,OAAOC,SAASC,KAAKC,MAAM,KAAK,GAChC,a,EAcRC,wB,sBAA0B,4BAAAC,EAAA,6DAClBC,EAAOC,SAASC,eAAe,eAChCC,MAAMC,QAAU,IACrBJ,EAAKG,MAAME,WAAa,gBAHA,SAIlBC,YAAK,IAJa,cAKxBN,EAAKG,MAAMC,QAAU,IALG,SAMlBE,YAAK,KANa,OAOxBN,EAAKO,gBAAgB,SAPG,2C,EAU1BC,oB,sBAAsB,8BAAAT,EAAA,6DACdC,EAAOC,SAASC,eAAe,cAC/BO,EAAaR,SAASC,eAAe,gBAE3CF,EAAKG,MAAMO,QAAX,kHACAD,EAAWN,MAAMQ,SAAW,WALR,SAOdL,YAAK,IAPS,cAQpBN,EAAKG,MAAMS,OAAS,OACpBZ,EAAKG,MAAMC,QAAU,IATD,UAWdE,YAAK,KAXS,QAYpBN,EAAKO,gBAAgB,SACrBE,EAAWF,gBAAgB,SAbP,4C,EAgBtBM,cAAgB,SAACC,EAAUC,GACzB,IAAMC,EAAgBC,IAASC,MAAMC,QAAO,SAACC,GAAD,OAAOA,EAAEC,OAASC,YAAWP,MAAY,GACrF,GAAIC,GAAiBA,EAAcF,GAIjC,OAHoBE,EAAcF,GAAUS,KAC1C,SAACH,GAAD,OAAQA,EAAII,OAAOC,OAAO,GAAIC,IAAKP,QAAO,SAACQ,GAAD,OAAQA,EAAGC,KAAOR,EAAE,MAAI,GAAI,CAAES,MAAOT,EAAE,GAAIU,MAAOV,EAAE,QAE7EG,KAAI,SAACH,GAAD,OACnB,kBAAC,UAAD,CACEW,IAAKX,EAAEQ,GAAqB,IAAhBI,KAAKC,SACjBC,KAAMd,EAAEc,KACRC,KAAMH,KAAKI,MAAOhB,EAAEe,KAAO,KAAQf,EAAES,MAAQT,EAAEU,QAC/CO,QAAqB,IAAZjB,EAAES,MAAcT,EAAEU,MAAQ,6BAAWV,EAAEU,MAAQ,KAAOV,EAAEiB,QAAQlB,QAAO,SAACQ,GAAD,OAAQA,EAAG,KAAOP,EAAES,SAAO,GAAG,GAC9GD,GAAIR,EAAEQ,GACNU,MAAOlB,EAAEkB,MACTC,YAAanB,EAAEmB,YACfV,MAAOT,EAAES,MACTC,MAAOV,EAAEU,Y,EAMnBU,mBAAqB,SAACC,EAAW3B,EAAU4B,GACzC,IACIC,EADE3B,EAAgBC,IAASC,MAAMC,QAAO,SAACC,GAAD,OAAOA,EAAEC,OAASC,YAAWoB,MAAI,GAEzE1B,GAAiBA,EAAcF,KACjC6B,EAAU,YAAO3B,EAAcF,KAGjC,IACyG,EADnG8B,EAAY3B,IAASC,MAAMC,QAAO,SAACC,GAAD,OAAOA,EAAEC,OAASC,YAAWP,QAAY,GACjF,GAAIrB,OAAOC,SAASkD,SAASC,SAAS,kBAAoBpD,OAAOC,SAASkD,SAASC,SAAS,aAC1F,EAAA7B,IAAS8B,SAASC,QAAQC,aAAYC,KAAtC,oBAA8CP,IAC9CQ,YAAe,wHAA0B,gBACpC,GAAIP,EAAW,CAAC,IAAD,EACpBA,EAAUH,IAAa,EAAAG,EAAUH,IAAWS,KAArB,oBAA6BP,IAAeC,EAAUH,GAAaE,EAC1FQ,YAAe,oFAAqB,EAAKC,UAAUX,GAAY,gBAE/DU,YAAe,oFAAqB,EAAKC,UAAUX,GAAY,WAC/DxB,IAASC,MAAMgC,KAAf,aAAsB7B,KAAMC,YAAWP,MAAa0B,EAAYE,IAElEU,e,EAGFC,aAAe,WAEb,IADA,IAAIC,EAAU,GADK,WAEVb,GACH,EAAK7B,cAAc,EAAKtB,MAAMC,KAAMkD,IACtCa,EAAQL,KAAK,CACX,kBAAC,WAAD,CAAUnB,IAAqB,IAAhBC,KAAKC,UAClB,uBAAGL,GAAG,kBAAkBN,YAAWoB,IACnC,uBACEc,UAAU,eACVC,QAAS,kBAAM,EAAKjB,mBAAmB9C,OAAOC,SAASC,KAAKC,MAAM,KAAK,GAAI,EAAKN,MAAMC,KAAMkD,KAF9F,kEAMA,6BAAM,EAAK7B,cAAc,EAAKtB,MAAMC,KAAMkD,QAXzCA,EAAI,EAAGA,GAAK,EAAGA,IAAM,EAArBA,GAgBT,OAAOa,G,EAGTG,iBAAmB,SAACtC,GAClB,EAAKuC,SAAS,CAAEnE,KAAM4B,EAAEwC,OAAO/B,QAC/BxC,EAAe+B,EAAEwC,OAAO/B,O,EAG1BgC,iBAAmB,kBAAMnE,OAAOoE,QAAQC,Q,EAExCX,UAAY,SAACY,GACX,IAAIpE,EACJ,OAAQoE,GACN,IAAK,YACHpE,EAAO,uCACP,MACF,IAAK,QACHA,EAAO,uCACP,MACF,IAAK,SACHA,EAAO,uCACP,MACF,IAAK,SACHA,EAAO,0DAKX,OAAOA,G,kEA7HHqE,KAAKC,MAAMC,YACbF,KAAKzD,sBAELyD,KAAKnE,0BAEPJ,OAAO0E,iBAAiB,YAAY,YACD,MAA7B1E,OAAOC,SAASkD,UAAoBnD,OAAOC,SAASkD,SAASC,SAAS,aAAWzD,EAAe,S,+BA2HtG,OACE,yBAAKuC,GAAG,cACN,kBAAC,IAAD,MACA,4BAAQA,GAAG,gBACT,uBAAGA,GAAG,qBAAN,mFACA,yBAAKA,GAAG,aAAayC,MAAM,6BAA6BC,QAAQ,YAAYb,QAASQ,KAAKJ,kBACxF,0BAAMU,EAAE,mEAGZ,4BAAQ3C,GAAG,mBAAmBC,MAAOoC,KAAK1E,MAAMC,KAAMgF,SAAUP,KAAKP,kBACnE,4BAAQF,UAAU,4BAA4B3B,MAAM,aAApD,wCAGA,4BAAQ2B,UAAU,4BAA4B3B,MAAM,SAApD,wCAGA,4BAAQ2B,UAAU,4BAA4B3B,MAAM,UAApD,wCAGA,4BAAQ2B,UAAU,4BAA4B3B,MAAM,UAApD,4DAIF,uBAAGD,GAAG,kBAAkBzB,MAAO,CAAEsE,QAASR,KAAKX,eAAe7D,OAAS,EAAI,OAAS,UAApF,yLACwCwE,KAAKb,UAAUa,KAAK1E,MAAMC,OAElE,6BAAMyE,KAAKX,qB,GAtKwBoB,c","file":"static/js/6.a7e3931c.chunk.js","sourcesContent":["import React, { Component, Fragment } from \"react\";\r\nimport \"../Styles/RecentlyAdded.css\"\r\nimport { userData, data, storeData } from \"../Data\";\r\nimport { dateGetter, dateIndex } from \"../NavicationBar/MainPage\";\r\nimport { wait, Snackbar, snackbarHandle } from \"../dependencies\";\r\nimport ItemCard from \"../Foods/ItemCard\"\r\n\r\nlet mealValueTmp = \"\";\r\nexport default class RecentlyAdded extends Component {\r\n  state = {\r\n    meal:\r\n      mealValueTmp.length > 0\r\n        ? mealValueTmp\r\n        : window.location.hash.split(\"#\")[1]\r\n        ? window.location.hash.split(\"#\")[1]\r\n        : \"breakfast\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.doAnimation) {\r\n      this.introPageTransition();\r\n    } else {\r\n      this.introPageFadeTransition();\r\n    }\r\n    window.addEventListener(\"popstate\", () => {\r\n      if (window.location.pathname === \"/\" || window.location.pathname.includes(\"search\")) mealValueTmp = \"\";\r\n    });\r\n  }\r\n\r\n  introPageFadeTransition = async () => {\r\n    const page = document.getElementById(\"recentPage\");\r\n    page.style.opacity = \"0\";\r\n    page.style.transition = \"opacity 350ms\";\r\n    await wait(20);\r\n    page.style.opacity = \"1\";\r\n    await wait(350);\r\n    page.removeAttribute(\"style\");\r\n  }; \r\n\r\n  introPageTransition = async () => {\r\n    const page = document.getElementById(\"recentPage\");\r\n    const pageHeader = document.getElementById(\"recentHeader\");\r\n\r\n    page.style.cssText = `position: fixed; bottom: 50%; left: 50%; opacity: 0; transform: translate(-50%, 100%); transition: bottom 200ms`;\r\n    pageHeader.style.position = \"relative\";\r\n\r\n    await wait(10);\r\n    page.style.bottom = \"100%\";\r\n    page.style.opacity = \"1\";\r\n\r\n    await wait(200);\r\n    page.removeAttribute(\"style\");\r\n    pageHeader.removeAttribute(\"style\");\r\n  };\r\n\r\n  getRecentMeal = (mealName, dateIndex) => {\r\n    const getDataByDate = userData.diary.filter((e) => e.date === dateGetter(dateIndex))[0];\r\n    if (getDataByDate && getDataByDate[mealName]) {\r\n      const getDataById = getDataByDate[mealName].map(\r\n        (e) => (e = Object.assign({}, data.filter((el) => el.id === e[0])[0], { value: e[1], input: e[2] }))\r\n      );\r\n      return getDataById.map((e) => (\r\n          <ItemCard\r\n            key={e.id + Math.random() * 1000}\r\n            name={e.name}\r\n            kcal={Math.round((e.kcal / 100) * (e.value * e.input))}\r\n            serving={e.value === 1 ? e.input + \" غرام \" : e.input + \"  \" + e.serving.filter((el) => el[1] === e.value)[0][0]}\r\n            id={e.id}\r\n            brand={e.brand}\r\n            description={e.description}\r\n            value={e.value}\r\n            input={e.input}\r\n          />\r\n      ));\r\n    }\r\n  };\r\n\r\n  addAllButtonHandle = (toAddMeal, mealName, i) => {\r\n    const getDataByDate = userData.diary.filter((e) => e.date === dateGetter(i))[0];\r\n    let itemsArray;\r\n    if (getDataByDate && getDataByDate[mealName]) {\r\n      itemsArray = [...getDataByDate[mealName]];\r\n    }\r\n\r\n    const addByDate = userData.diary.filter((e) => e.date === dateGetter(dateIndex))[0];\r\n    if (window.location.pathname.includes(\"CreateNewMeal\") || window.location.pathname.includes(\"EditMeal\")) {\r\n      userData.favorite.tmpMeal.mealContent.push(...itemsArray);\r\n      snackbarHandle(\"تمت الإضافة على الوجبة\", \"success\");\r\n    } else if (addByDate) {\r\n      addByDate[toAddMeal] ? addByDate[toAddMeal].push(...itemsArray) : (addByDate[toAddMeal] = itemsArray);\r\n      snackbarHandle(\"تمت الإضافة على \" + this.checkHash(toAddMeal), \"success\");\r\n    } else {\r\n      snackbarHandle(\"تمت الإضافة على \" + this.checkHash(toAddMeal), \"success\");\r\n      userData.diary.push({ date: dateGetter(dateIndex), [toAddMeal]: itemsArray });\r\n    }\r\n    storeData();\r\n  };\r\n\r\n  renderRecent = () => {\r\n    let content = [];\r\n    for (let i = 0; i > -8; i--) {\r\n      if (this.getRecentMeal(this.state.meal, i)) {\r\n        content.push([\r\n          <Fragment key={Math.random() * 1000}>\r\n            <p id=\"recentDateText\">{dateGetter(i)}</p>\r\n            <p\r\n              className=\"recentAddAll\"\r\n              onClick={() => this.addAllButtonHandle(window.location.hash.split(\"#\")[1], this.state.meal, i)}\r\n            >\r\n              إضافة الكل ↓\r\n            </p>\r\n            <div>{this.getRecentMeal(this.state.meal, i)}</div>\r\n          </Fragment>,\r\n        ]);\r\n      }\r\n    }\r\n    return content;\r\n  };\r\n\r\n  selectMealHandle = (e) => {\r\n    this.setState({ meal: e.target.value });\r\n    mealValueTmp = e.target.value;\r\n  };\r\n\r\n  backButtonHandle = () => window.history.back();\r\n\r\n  checkHash = (h) => {\r\n    let hash;\r\n    switch (h) {\r\n      case \"breakfast\":\r\n        hash = \"الفطور\";\r\n        break;\r\n      case \"lunch\":\r\n        hash = \"الغداء\";\r\n        break;\r\n      case \"dinner\":\r\n        hash = \"العشاء\";\r\n        break;\r\n      case \"snacks\":\r\n        hash = \"وجبة خفيفة\";\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return hash;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"recentPage\">\r\n        <Snackbar />\r\n        <header id=\"recentHeader\">\r\n          <p id=\"recentHeaderTitle\">المضافة مؤخراً</p>\r\n          <svg id=\"recentBack\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" onClick={this.backButtonHandle}>\r\n            <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\r\n          </svg>\r\n        </header>\r\n        <select id=\"recentSelectMeal\" value={this.state.meal} onChange={this.selectMealHandle}>\r\n          <option className=\"itemViewerSelectMealItems\" value=\"breakfast\">\r\n            الفطور\r\n          </option>\r\n          <option className=\"itemViewerSelectMealItems\" value=\"lunch\">\r\n            الغداء\r\n          </option>\r\n          <option className=\"itemViewerSelectMealItems\" value=\"dinner\">\r\n            العشاء\r\n          </option>\r\n          <option className=\"itemViewerSelectMealItems\" value=\"snacks\">\r\n            وجبة خفيفة\r\n          </option>\r\n        </select>\r\n        <p id=\"recentNoResults\" style={{ display: this.renderRecent().length > 0 ? \"none\" : \"block\" }}>\r\n          لا يوجد عناصر مضافة في آخر اسبوع على {this.checkHash(this.state.meal)}\r\n        </p>\r\n        <div>{this.renderRecent()}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}