(this["webpackJsonpmy-daily-calories"]=this["webpackJsonpmy-daily-calories"]||[]).push([[4],{105:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return N}));var n,r,i=a(20),l=a(7),c=a(4),o=a.n(c),m=a(6),s=a(0),u=a.n(s),d=(a(105),a(3)),f=a(1),p=a(2),b=a(5),w=a(8),k=u.a.lazy((function(){return Promise.resolve().then(a.bind(null,19))})),v=u.a.lazy((function(){return a.e(0).then(a.bind(null,96))}));function N(e){var t=Object(s.useCallback)((function(){return p.i.favorite.meals.filter((function(t){return t.mealName===(e.name?e.name:n)}))[0].content.map((function(e){return e=Object.assign({},p.b.filter((function(t){return t.id===e[0]}))[0],{value:e[1],input:e[2]})}))}),[e.name]),a=Object(s.useCallback)((function(e){return t().map((function(t){return t.value*t.input/100*t[e]})).reduce((function(e,t){return e+t}))}),[t]),c=Object(s.useCallback)((function(){return Math.min(Math.max(Math.round(9*a("fat")/(e.kcal?e.kcal:r)*100),0),100)}),[e.kcal,a]),N=Object(s.useCallback)((function(){return Math.min(Math.max(Math.round(4*a("protein")/(e.kcal?e.kcal:r)*100),0),100)}),[e.kcal,a]),E=Object(s.useCallback)((function(){return Math.min(Math.max(Math.round(4*a("carb")/(e.kcal?e.kcal:r)*100),0),100)}),[e.kcal,a]),h=Object(s.useCallback)((function(){return E()>15?Math.min(Math.max(100-(c()+N()),0),100):E()}),[E,c,N]),V=Object(s.useCallback)((function(){Object(f.a)("#mealNutritionInfoCrabsPercent").progress({input:h(),strokeColor:"var(--text-kinda-black)",textColor:"var(--text-kinda-black)",strokeBackgroundColor:"var(--background-gray)",strokeLinecap:"none"}),Object(f.a)("#mealNutritionInfoProteinPercent").progress({input:N(),strokeColor:"var(--text-kinda-black)",textColor:"var(--text-kinda-black)",strokeBackgroundColor:"var(--background-gray)",strokeLinecap:"none"}),Object(f.a)("#mealNutritionInfoFatPercent").progress({input:c(),strokeColor:"var(--text-kinda-black)",textColor:"var(--text-kinda-black)",strokeBackgroundColor:"var(--background-gray)",strokeLinecap:"none"});var e=document.createElement("p"),t=document.createElement("p"),a=document.createElement("p");e.classList.add("mealPercentTitles"),t.classList.add("mealPercentTitles"),a.classList.add("mealPercentTitles"),e.innerHTML="\u0627\u0644\u0643\u0631\u0628\u0648\u0647\u064a\u062f\u0631\u0627\u062a",t.innerHTML="\u0627\u0644\u0628\u0631\u0648\u062a\u064a\u0646",a.innerHTML="\u0627\u0644\u062f\u0647\u0648\u0646",document.getElementById("mealNutritionInfoCrabsPercent").append(e),document.getElementById("mealNutritionInfoProteinPercent").append(t),document.getElementById("mealNutritionInfoFatPercent").append(a)}),[c,N,h]);Object(s.useEffect)((function(){return V(),e.name&&(n=e.name,r=e.kcal),function(){document.querySelector("meta[name=theme-color]").setAttribute("content",JSON.parse(window.localStorage.getItem("theme"))[0])}}),[V,e.kcal,e.name]),Object(s.useLayoutEffect)((function(){e.doAnimation?Object(d.b)("mealViewerPage"):y(),document.querySelector("meta[name=theme-color]").setAttribute("content",JSON.parse(window.localStorage.getItem("theme"))[1])}),[e.doAnimation]);var y=function(){var e=Object(m.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=document.getElementById("mealViewerPage")).style.opacity="0",t.style.transition="opacity 350ms",e.next=5,Object(d.f)(20);case 5:return t.style.opacity="1",e.next=8,Object(d.f)(350);case 8:t.removeAttribute("style");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("none"!==Object(f.a)("#mealViewerConfirmBG").getStyle("display")){e.next=10;break}return Object(f.a)("#mealViewerConfirmBG").css({display:"block"}),Object(f.a)("#mealViewerConfirmContainer").css({display:"block"}),e.next=6,Object(d.f)(20);case 6:Object(f.a)("#mealViewerConfirmBG").css({opacity:1}),Object(f.a)("#mealViewerConfirmContainer").css({opacity:1,bottom:"50%"}),e.next=16;break;case 10:return Object(f.a)("#mealViewerConfirmBG").css({opacity:0}),Object(f.a)("#mealViewerConfirmContainer").css({opacity:0}),e.next=14,Object(d.f)(350);case 14:Object(f.a)("#mealViewerConfirmBG").removeAttr("style"),Object(f.a)("#mealViewerConfirmContainer").removeAttr("style");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(s.Fragment,null,u.a.createElement("div",{id:"mealViewerConfirmBG",onClick:C}),u.a.createElement("div",{id:"mealViewerConfirmContainer"},u.a.createElement("p",null,"\u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u0648\u062c\u0628\u0629 \u0645\u0646 \u0627\u0644\u0645\u0641\u0636\u0644\u0629\u061f"),u.a.createElement("button",{onClick:function(){var t=p.i.favorite.meals.indexOf(p.i.favorite.meals.filter((function(t){return t.mealName===(e.name?e.name:n)}))[0]);p.i.favorite.meals.splice(t,1),Object(p.f)(),window.history.back()}},"\u0646\u0639\u0645"),u.a.createElement("button",{onClick:C},"\u0644\u0627")),u.a.createElement("div",{id:"mealViewerPage"},u.a.createElement("header",{id:"mealViewerPageHeader",style:{gridTemplateColumns:window.location.pathname.includes("search")?"repeat(1, 1fr) 0.4fr":"repeat(2, 1fr) 0.4fr"}},u.a.createElement("svg",{id:"mealViewerBackButton",onClick:function(){return window.history.back()},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},u.a.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})),u.a.createElement("svg",{id:"mealViewerTrashCan",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",onClick:C,style:{display:window.location.pathname.includes("search")?"none":"block"}},u.a.createElement("path",{d:"M3 6v18h18v-18h-18zm5 14c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4-18v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712z"})),u.a.createElement("svg",{id:"mealViewerEdit",onClick:function(){var t=p.i.favorite.meals.indexOf(p.i.favorite.meals.filter((function(t){return t.mealName===(e.name?e.name:n)}))[0]);p.i.favorite.tmpMeal.mealName=e.name?e.name:n,p.i.favorite.tmpMeal.mealContent=Object(l.a)(p.i.favorite.meals[t].content),Object(b.updateRenderState)(u.a.createElement(s.Suspense,{fallback:"",key:100*Math.random()},u.a.createElement(v,{key:100*Math.random(),doAnimation:!0,editMode:!0,oldName:e.name?e.name:n}))),window.history.pushState("","","/EditMeal")},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",style:{display:window.location.pathname.includes("search")?"none":"block"}},u.a.createElement("path",{d:"M7.127 22.562l-7.127 1.438 1.438-7.128 5.689 5.69zm1.414-1.414l11.228-11.225-5.69-5.692-11.227 11.227 5.689 5.69zm9.768-21.148l-2.816 2.817 5.691 5.691 2.816-2.819-5.691-5.689z"})),u.a.createElement("p",{id:"mealViewerHeaderTitle",style:{display:window.location.pathname.includes("search")?"block":"none"}},function(){var e;switch(window.location.hash.split("#")[2]){case"breakfast":e="\u0627\u0644\u0641\u0637\u0648\u0631";break;case"lunch":e="\u0627\u0644\u063a\u062f\u0627\u0621";break;case"dinner":e="\u0627\u0644\u0639\u0634\u0627\u0621";break;case"snacks":e="\u0648\u062c\u0628\u0629 \u062e\u0641\u064a\u0641\u0629"}return e}())),u.a.createElement("div",{id:"mealViewerHeaderButtonsContainer"},u.a.createElement("p",{id:"mealViewerHeaderItemName"},e.name?e.name:n),u.a.createElement("div",{id:"mealViewerOkButtonBg",onClick:function(){var t,a=p.i.favorite.meals.filter((function(t){return t.mealName===(e.name?e.name:n)}))[0].content,r="#Meals#MealViewer"===window.location.hash?Object(f.a)("#mealViewerSelectMeal").val():window.location.hash.split("#")[2],c=p.i.diary.filter((function(e){return e.date===Object(w.a)(w.b)}))[0];c?c[r]?(t=c[r]).push.apply(t,Object(l.a)(a)):c[r]=Object(l.a)(a):p.i.diary.push(Object(i.a)({date:Object(w.a)(w.b)},r,Object(l.a)(a)));Object(p.f)(),window.history.back()}},u.a.createElement("svg",{id:"mealViewerOkButton",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},u.a.createElement("path",{d:"M21 6.285l-11.16 12.733-6.84-6.018 1.319-1.49 5.341 4.686 9.865-11.196 1.475 1.285z"}))),u.a.createElement("div",{id:"mealViewerOkButtonAnimation1"}),u.a.createElement("div",{id:"mealViewerOkButtonAnimation2"})),u.a.createElement("p",{id:"mealViewerKcal"},Math.round(e.kcal||0===e.kcal?e.kcal:r),u.a.createElement("span",null,"\u0633\u0639\u0631\u0629 \u062d\u0631\u0627\u0631\u064a\u0629")),u.a.createElement("div",{id:"mealViewerSelectMealContainer",style:{display:"#Meals#MealViewer"===window.location.hash?"block":"none"}},u.a.createElement("select",{id:"mealViewerSelectMeal"},u.a.createElement("option",{className:"itemViewerSelectMealItems",value:"breakfast"},"\u0627\u0644\u0641\u0637\u0648\u0631"),u.a.createElement("option",{className:"itemViewerSelectMealItems",value:"lunch"},"\u0627\u0644\u063a\u062f\u0627\u0621"),u.a.createElement("option",{className:"itemViewerSelectMealItems",value:"dinner"},"\u0627\u0644\u0639\u0634\u0627\u0621"),u.a.createElement("option",{className:"itemViewerSelectMealItems",value:"snacks"},"\u0648\u062c\u0628\u0629 \u062e\u0641\u064a\u0641\u0629"))),u.a.createElement("div",{id:"mealNutritionInfoPercentContainer"},u.a.createElement("div",{id:"mealNutritionInfoCrabsPercent"}),u.a.createElement("div",{id:"mealNutritionInfoProteinPercent"}),u.a.createElement("div",{id:"mealNutritionInfoFatPercent"})),u.a.createElement("div",{id:"foodsInTheMealContainer"},u.a.createElement("p",{className:"mealViewerInfoTitles"},"\u0627\u0644\u0637\u0639\u0627\u0645 \u0627\u0644\u0645\u0648\u062c\u0648\u062f \u0641\u064a \u0627\u0644\u0648\u062c\u0628\u0629"),t().map((function(e){return u.a.createElement(s.Suspense,{fallback:"",key:100*Math.random()},u.a.createElement(k,{key:e.id+1e3*Math.random(),name:e.name,kcal:Math.round(e.kcal/100*(e.value*e.input)),serving:1===e.value?e.input+" \u063a\u0631\u0627\u0645 ":e.input+"  "+e.serving.filter((function(t){return t[1]===e.value}))[0][0],id:e.id,brand:e.brand,description:e.description,value:e.value,input:e.input}))}))),u.a.createElement("p",{className:"mealViewerInfoTitles"},"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u063a\u0630\u0627\u0626\u064a\u0629 \u0644\u0644\u0648\u062c\u0628\u0629"),u.a.createElement("div",{id:"mealViewerNutritionInfoDetail"},u.a.createElement("div",{id:"mealViewerNutritionInfoTitles"},u.a.createElement("p",{className:"mealViewerNutritionInfoMain"},"\u0627\u0644\u0628\u0631\u0648\u062a\u064a\u0646"),u.a.createElement("p",{className:"mealViewerNutritionInfoMain"},"\u0627\u0644\u0643\u0631\u0628\u0648\u0647\u064a\u062f\u0631\u0627\u062a"),u.a.createElement("p",{className:"mealViewerNutritionInfoSub"},"\u0627\u0644\u0623\u0644\u064a\u0627\u0641"),u.a.createElement("p",{className:"mealViewerNutritionInfoSub"},"\u0627\u0644\u0633\u0643\u0631"),u.a.createElement("p",{className:"mealViewerNutritionInfoMain"},"\u0627\u0644\u062f\u0647\u0648\u0646"),u.a.createElement("p",{className:"mealViewerNutritionInfoSub"},"\u0627\u0644\u062f\u0647\u0648\u0646 \u0627\u0644\u0645\u0634\u0628\u0639\u0629"),u.a.createElement("p",{className:"mealViewerNutritionInfoSub"},"\u0627\u0644\u062f\u0647\u0648\u0646 \u0627\u0644\u063a\u064a\u0631 \u0645\u0634\u0628\u0639\u0629"),u.a.createElement("p",{className:"mealViewerNutritionInfoMain"},"\u0622\u062e\u0631"),u.a.createElement("p",{className:"mealViewerNutritionInfoSub"},"\u0627\u0644\u0643\u0648\u0644\u064a\u0633\u062a\u0631\u0648\u0644"),u.a.createElement("p",{className:"mealViewerNutritionInfoSub"},"\u0627\u0644\u0635\u0648\u062f\u064a\u0648\u0645"),u.a.createElement("p",{className:"mealViewerNutritionInfoSub"},"\u0627\u0644\u0628\u0648\u062a\u0627\u0633\u064a\u0648\u0645")),u.a.createElement("div",{id:"mealViewerNutritionInfoValues"},u.a.createElement("p",{className:"mealViewerNutritionInfoMain"},Number(a("protein").toFixed(1))," \u063a"),u.a.createElement("p",{className:"mealViewerNutritionInfoMain"},Number(a("carb").toFixed(1))," \u063a"),u.a.createElement("p",{className:"mealViewerNutritionInfoSub"},Number(a("fiber").toFixed(1))," \u063a"),u.a.createElement("p",{className:"mealViewerNutritionInfoSub"},Number(a("sugar").toFixed(1))," \u063a"),u.a.createElement("p",{className:"mealViewerNutritionInfoMain"},Number(a("fat").toFixed(1))," \u063a"),u.a.createElement("p",{className:"mealViewerNutritionInfoSub"},Number(a("saturatedFat").toFixed(2))," \u063a"),u.a.createElement("p",{className:"mealViewerNutritionInfoSub"},Number(a("unsaturatedFat").toFixed(2))," \u063a"),u.a.createElement("p",{className:"mealViewerNutritionInfoMain",style:{visibility:"hidden"}},"......"),u.a.createElement("p",{className:"mealViewerNutritionInfoSub"},a("cholesterol").toFixed(0)," \u0645\u0644\u063a"),u.a.createElement("p",{className:"mealViewerNutritionInfoSub"},a("sodium").toFixed(0)," \u0645\u0644\u063a"),u.a.createElement("p",{className:"mealViewerNutritionInfoSub"},a("potassium").toFixed(0)," \u0645\u0644\u063a")))))}}}]);
//# sourceMappingURL=4.fb2c4ebe.chunk.js.map